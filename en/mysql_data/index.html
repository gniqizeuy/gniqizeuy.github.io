mysql_data
MySQL Data Type
mysql 


<h4 id="toc_0">日期和时间类型</h4>

<p>MySQL 可以使用许多类型来保存日期和时间值，例如 YEAR 和 DATE。MySQL 能存储的最小粒度为秒（MariaDB 支持微妙级别的时间类型）。但是 MySQL也可以使用微妙级的粒度进行临时运算。</p>

<p>大部分时间类型都没有替代品，因此没有什么是最佳选择的问题。唯一的问题是保存日期和时间的时候需要做什么。MySQL 提供两种相似的日期类型：DATETIME 和 TIMESTAMP。对于很多应用程序，它们都能工作，但在某些场景，一个比另一个工作得好。</p>

<h5 id="toc_1">DATETIME</h5>

<p>此类型能保存大范围得值，从 1001 年到 9999 年，精度为秒。它把日期和时间封装到格式为 YYYYMMDDHHMMSS 的整数中，与时区无关。使用 8 个字节的存储空间</p>

<p>默认情况下，MySQL 以一种可排序，无歧义的格式显示 DATETIME 值，例如 &ldquo;2008-01-16 22:37:08&rdquo;。这是 ANSI 标准定义的日期和时间表示方法。</p>

<p>TIMESTAMP</p>

<p>与名字一样，TIMESTAMP 类型保存了从 1970 年 1 月 1 日午夜（格林尼治时间）以来的秒数，它和 UNIX 时间戳相同。TIMESTAMP 只使用 4 个字节的存储空间，因此它的范围比 DSATETIME 小得多：只能表示从 1970 年到 2038 年。MySQL 提供了 <code>FROM_UNIXTIME()</code> 函数把 Unix 时间戳转化为日期，并提供了 <code>UNIX_TIMESTAMP()</code> 函数把日期转换为 Unix 时间戳</p>

<p>MySQL 4.1 以及更新的版本按照 DATETIME 的方式格式化为 TIMESTAMP 的值，但是，MySQL 4.0以及更老的版本不会在各个部分之间显示任何标点符号。这仅仅是显示格式上的区别，TIMESTAMP 的存储格式在各个版本都是一样的。</p>

<p>TIMESTAMP 显示的值也依赖于时区。MySQL 服务器、操作系统，以及客户端连接都有时区设置。</p>

<p>因此，存储为 0 的 TIMESTAMP 在美国东部时区显示为 &ldquo;1969-12-31 19:00:00&rdquo;，与格林尼治时间相差 5 个小时。有必要强调以下区别：如果多个时区存储或访问数据，TIMESTAMP 和 DSATETIME  的行为将很不一样。前者提供的值与时区有关系，后者则保留文本表示的日期和时间。</p>

<p>TIMESTAMP 也有 DSATETIME  没有的特殊属性。默认情况下，如果插入时没有指定第一个 TIMESTAMP 列的值，MySQL 则设置这个列为当前时间。在插入一行记录时。MySQL 也会更新第一个 TIMESTAMP 的值（除非在 UPDATE 语句中明确指定了值）。你可以配置任何 TIMESTAMP 列的插入和更新行为。最后 TIMESTAMP 列默认为 NOT NULL。这也和其他的数据类型不一样。</p>

<p>[^1]: TIMESTAMP 的行为规则比较复杂，并且在不同的 MySQL 版本里会有变动，所以你应该验证数据库的行为是你需要的。一个好的方式是修改完 TIMESTAMP 列后用 SHOW CREATE TBALE 命令检查输出。</p>

<p>除了特殊行为之外，通常也应该尽量使用 TIMESTAMP，因为它比 DATETIME 空间效率更高。有时候人们会将 Unix 时间戳存储为整数值，但这不会带来任何收益。用整数保存时间戳得格式通常不方便处理，所以不推荐这么做。</p>

<p>如果需要存储比秒更小粒度得日期和时间值，MySQL 目前没有提供合适的数据类型，但是可以使用自己的存储格式：可以使用 BIGINT 类型存储微妙级别的时间戳，或者使用 DOUBLE 存储秒之后的小数部分。这两种方式都可以，或者也可以使用 MariaDB 替代 MySQL。</p>
